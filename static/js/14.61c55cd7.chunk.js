(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[14],{121:function(e,t,a){"use strict";a.r(t);var n=a(69),c=a(5),r=a.n(c),s=a(9),i=a(3),o=a(70),l=a(17),u=a(2),d=a(68),m=a(26),j=a(76),b=a.n(j),f=a(15),p=a(13),h=a(110),O=a.n(h),v=a(8),x=function(e){var t=e.handleValidation,a=e.handleSubmit,n=e.whatAutocomplete,c=e.autocompleteStyles,r=e.autocompleteItems,s=e.setWhatAutocomplete,i=e.fromAutocompleteItems,o=e.fromAutocomplete,l=e.setFromAutocomplete,u=e.setNewTransaction,m=e.handleCancel,j=e.edit;return Object(v.jsx)("div",{className:"newTransaction",children:Object(v.jsx)(d.a,{initialValues:{what:"",count:"",from:"",price:""},validate:t,onSubmit:a,children:function(e){var t=e.values,a=e.errors,d=(e.touched,e.handleChange),b=e.handleBlur,f=e.handleSubmit,p=e.isSubmitting;return Object(v.jsx)("form",{className:"newTransaction-form",onSubmit:f,children:Object(v.jsxs)("div",{className:"fieldsContainer",children:[!j&&Object(v.jsxs)("div",{className:"formField ".concat(a.what),children:[Object(v.jsx)("label",{htmlFor:"what",children:"What"}),Object(v.jsx)(O.a,{wrapperStyle:{width:"100%"},menuStyle:c,getItemValue:function(e){return e.label},items:r.filter((function(e){return e.value.includes(n.toLowerCase())})),placeholder:"What",renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:n,onChange:function(e){var t=e.currentTarget.value;s(t)},onSelect:function(e){d({target:{name:"what",value:e},currentTarget:{name:"what",value:e}}),s(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.count),children:[Object(v.jsx)("label",{htmlFor:"count",children:"Count"}),Object(v.jsx)("input",{type:"number",name:"count",onChange:d,onBlur:b,value:t.count})]}),!j&&Object(v.jsxs)("div",{className:"formField ".concat(a.from),children:[Object(v.jsx)("label",{htmlFor:"from",children:"From"}),Object(v.jsx)(O.a,{wrapperStyle:{width:"100%"},menuStyle:c,getItemValue:function(e){return e.label},items:i.filter((function(e){return e.value.includes(o.toLowerCase())})),renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:o,onChange:function(e){var t=e.currentTarget.value;l(t)},onSelect:function(e){d({target:{name:"from",value:e},currentTarget:{name:"from",value:e}}),l(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.price),children:[Object(v.jsx)("label",{htmlFor:"price",children:"Price"}),Object(v.jsx)("input",{type:"number",name:"price",onChange:d,onBlur:b,value:t.price})]}),Object(v.jsxs)("div",{className:"buttonsContainer",children:[Object(v.jsx)("button",{className:"formButton",type:"submit",disabled:p,children:j?"Edit":"Add"}),Object(v.jsx)("button",{className:"formButton formButton-cancel",type:"cancel",onClick:function(){m?m():u(!1)},children:"Cancel"})]})]})})}})})},g=a(19),w=a(65),N=["categories"];t.default=function(){var e=Object(m.c)(),t=Object(u.useState)([]),a=Object(l.a)(t,2),c=a[0],d=a[1],j=Object(u.useState)(!1),h=Object(l.a)(j,2),O=h[0],S=h[1],C=Object(u.useState)(""),y=Object(l.a)(C,2),A=y[0],F=y[1],I=Object(u.useState)(""),P=Object(l.a)(I,2),k=P[0],T=P[1],H=Object(u.useState)([]),L=Object(l.a)(H,2),E=L[0],W=L[1],Y=Object(u.useState)([]),B=Object(l.a)(Y,2),J=B[0],D=B[1],V=Object(u.useState)(""),U=Object(l.a)(V,2),M=U[0],R=U[1],q=Object(u.useState)(""),_=Object(l.a)(q,2),z=_[0],G=_[1],K=Object(u.useState)(0),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],$=Object(u.useState)(0),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(u.useState)(),ce=Object(l.a)(ne,2),re=ce[0],se=ce[1],ie=Object(u.useState)({borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"200px"}),oe=Object(l.a)(ie,2),le=oe[0];oe[1];Object(m.d)((function(t){var a=t.collections,n=t.settings.base;a.initFlag||(e({type:f.c}),a.categories.forEach((function(t){var c,r=null===(c=a[t])||void 0===c?void 0:c.model;e({type:f.a,payload:{url:r.getAllUrl(n),category:r.getCategoryName()}})})))})),Object(m.d)((function(e){var t=e.collections,a=t.categories,n=Object(o.a)(t,N),c=e.settings.base,r=[{label:c,value:c.toLowerCase(),rate:1}],s=[{label:c,value:c.toLowerCase(),rate:1}];null===a||void 0===a||a.forEach((function(e){var t;null===(t=n[e].data)||void 0===t||t.forEach((function(t){var a=Object(i.a)({label:t.name,value:t.name.toLowerCase()},t);r.push(a),"currencies"===e&&s.push(a)}))})),JSON.stringify(E)!==JSON.stringify(r)&&W(r),JSON.stringify(J)!==JSON.stringify(s)&&D(s)})),Object(u.useEffect)((function(){var e=0,t=0;c.forEach((function(a){var n=a.price,c=a.currentPrice;e+=parseFloat(c),t+=parseFloat(n)})),Z(e.toFixed(2)),ae(t.toFixed(2))}),[c]);var ue=Object(m.d)((function(e){return Object.assign({},e).authUser.user.id}));Object(u.useEffect)((function(){ue&&Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get({url:"/investments?filter=".concat(JSON.stringify({userId:ue}))});case 2:(t=e.sent).length!==c.length&&d(t.map((function(e){var t=de(e);return Object(i.a)(Object(i.a)({},e),{},{id:e._id,currentPrice:t,currentPricePercentage:fe(e.price,t),createdAt:b()(e.createdAt.toString()).format("DD.MM.YYYY - HH:mm:ss")})})));case 4:case"end":return e.stop()}}),e)})))()}),[c,E,ue]);var de=function(e){var t=E.find((function(t){var a=t.value;return e.what.toLowerCase()===a})),a=E.find((function(t){var a=t.value;return e.from.toLowerCase()===a}));return((null===t||void 0===t?void 0:t.rate)*e.count/(null===a||void 0===a?void 0:a.rate)||0).toFixed(2)},me=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.a)(Object(i.a)({id:Date.now()},t),{},{currentPrice:de(t)}),e.prev=1,e.next=4,p.a.post({url:"/investment",body:Object(i.a)({userId:ue},a)});case 4:s=e.sent,a.id=(null===s||void 0===s?void 0:s._id)||a.id,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:S(!1),d([].concat(Object(n.a)(c),[Object(i.a)(Object(i.a)({},a),{},{currentPricePercentage:fe(a.price,a.currentPrice),createdAt:b()((new Date).toString()).format("DD.MM.YYYY - HH:mm:ss")})]));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,n,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.find((function(e){return e.id===re})),n={count:t.count,price:t.price},e.prev=2,e.next=5,p.a.update({url:"/investment/".concat(a.id),body:n});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:s=e.t0,s.ok?(o=de(Object(i.a)(Object(i.a)({},a),n)),se(),d(c.map((function(e){return e.id===a.id&&(e=Object(i.a)(Object(i.a)(Object(i.a)({},e),n),{},{currentPrice:o,currentPricePercentage:fe(t.price,o)})),e}))),g.store.addNotification({title:"Update",message:"Investment successfully updated",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}})):g.store.addNotification({title:"Update",message:"Update error, please try again",type:"error",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onScreen:!0}}),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(2),console.error(e.t1);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete({url:"/investment/".concat(t)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:d(Object(n.a)(c.filter((function(e){return e.id!==t}))));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(e,t){return(t/e*100-100||0).toFixed(1)},pe=function(e){return e>0?"plus":"minus"},he=fe(te,X);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{className:"sectionTitle",children:["Wallet ammount:"," ",Object(v.jsxs)("span",{className:"difference ".concat(pe(he)),children:[X||0," | ",he,"%"]})]}),Object(v.jsxs)("button",{className:"addTransactionButton",onClick:function(){S(!0)},children:[Object(v.jsx)("span",{children:"Add investment"})," ",Object(v.jsx)("i",{className:"fa-solid fa-plus addIcon"})]}),O&&Object(v.jsx)(x,{handleValidation:function(e){return function(e){var t={};return["what","count","from","price"].forEach((function(a){e[a]||(t[a]="Required")})),t}(e)},handleSubmit:function(e){return me(e)},whatAutocomplete:M,autocompleteStyles:le,autocompleteItems:E,setWhatAutocomplete:R,fromAutocompleteItems:J,fromAutocomplete:z,setFromAutocomplete:G,setNewTransaction:S}),c.length?Object(v.jsx)("h3",{className:"sectionTitle mt-4",children:"Investments:"}):"",Object(v.jsxs)("div",{className:"transactionContainer tableContainer",children:[c.length?Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"tableHeaderContainer row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"tableHeader",children:"When"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"What \ud83d\udd0d",value:A,onChange:function(e){var t=e.currentTarget.value;return F(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader",children:"Count"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"From \ud83d\udd0d",value:k,onChange:function(e){var t=e.currentTarget.value;return T(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Current Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto"})]})}):"",Object(v.jsx)("div",{className:"d-flex w-100 m-auto flex-column",children:c.filter((function(e){var t=e.what,a=e.from;return t.toLowerCase().includes(A)&&a.toLowerCase().includes(k)})).map((function(e,t){var a=e.id,n=e.what,c=e.count,r=e.from,s=e.price,i=e.createdAt,o=e.currentPrice,l=e.currentPricePercentage;return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"transaction categoryItem row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"cell date",children:i}),Object(v.jsx)("span",{className:"cell",children:n}),Object(v.jsx)("span",{className:"cell",children:c}),Object(v.jsx)("span",{className:"cell",children:r}),Object(v.jsx)("span",{className:"cell",children:s}),Object(v.jsxs)("span",{className:"cell m-auto ".concat(pe(l)," currentPrice"),children:[Object(v.jsxs)("span",{children:[o," | "]}),Object(v.jsxs)("span",{className:"percentage",children:[l,"%"]})]}),Object(v.jsxs)("span",{className:"cell actions",children:[Object(v.jsx)("i",{className:"far fa-trash-alt",onClick:function(){return be(a)}}),Object(v.jsx)("i",{className:"fas fa-pencil-alt",onClick:function(){return se(a)}}),Object(v.jsx)(w.c,{className:"d-inline-flex mr-1 ml-1",to:"/app/details/".concat(a),children:Object(v.jsx)("i",{className:"fas fa-info-circle ml-4"})})]})]},t),a===re&&Object(v.jsx)(x,{edit:!0,handleValidation:function(e){return function(e){var t={};return["count","price"].forEach((function(a){e[a]||(t[a]="Required")})),t}(e)},handleSubmit:function(e){return je(e)},handleCancel:function(){return se()},whatAutocomplete:M,autocompleteStyles:le,autocompleteItems:E,setWhatAutocomplete:R,fromAutocompleteItems:J,fromAutocomplete:z,setFromAutocomplete:G,setNewTransaction:S})]},t)}))})]})]})}}}]);
//# sourceMappingURL=14.61c55cd7.chunk.js.map