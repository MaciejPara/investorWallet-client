(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[1],{14:function(e,t,n){"use strict";var r=n(5),a=n.n(r),c=n(3),s=n(11),o=n(12),i=n(13),u=n(33),l=n(31),d=n(17),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r,a=e.apiUrl;return Object(o.a)(this,n),(r=t.call(this))._url=a,r._config={headers:{"content-type":"application/json","Access-Control-Allow-Origin":!0,"Access-Control-Allow-Credentials":!0},credentials:"include"},r}return Object(i.a)(n,[{key:"get",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"get"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"post",body:JSON.stringify(r)}));case 3:if(401!==(null===(s=e.sent)||void 0===s?void 0:s.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===s||void 0===s?void 0:s.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:if(409!==(null===s||void 0===s?void 0:s.status)){e.next=10;break}return e.abrupt("return",this._showEmailAlreadyExists());case 10:return e.next=12,s.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"PATCH",body:JSON.stringify(r)}));case 3:if(401!==(null===(s=e.sent)||void 0===s?void 0:s.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===s||void 0===s?void 0:s.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:return e.next=10,s.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"delete"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"_showUnauthorized",value:function(){d.store.addNotification({title:"Failure",message:"Unauthorized - check your e-mail or password.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showInternalServerError",value:function(){d.store.addNotification({title:"Failure",message:"Internal server error. Contact with admin.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showEmailAlreadyExists",value:function(){d.store.addNotification({title:"Failure",message:"Email already exists.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}}]),e}());t.a=new f({apiUrl:"https://investor-wallet.herokuapp.com"})},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="GET_CATEGORY_DATA",a="SET_DATA"},24:function(e,t,n){"use strict";var r=n(29),a=n.n(r),c=n(1),s=n.n(c);t.a=function(){return s.a.createElement("img",{className:"loader",src:a.a,alt:"loader"})}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="SET_SETTINGS"},27:function(e,t,n){"use strict";n(6)},28:function(e,t){},29:function(e,t,n){e.exports=n.p+"static/media/loader.f6f2de36.gif"},37:function(e,t,n){e.exports=n(48)},42:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),s=n.n(c);n(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(24),i=n(9),u=n(32),l=n(3),d=n(6),f={user:JSON.parse(localStorage.getItem("investorWalletUser")||"{}"),init:!0},p=n(19),h=n(12),b=n(13),v=function(){function e(t){var n=t.name,r=t.plural,a=t.sort,c=t.categoryName;Object(h.a)(this,e),this._name=n,this._plural=r,this._fetchPending=!1,this._data=[],this._sort=a,this._categoryName=c,this._shouldRefresh=!0,this._baseUrl="/".concat(this._plural)}return Object(b.a)(e,[{key:"setRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._shouldRefresh=e}},{key:"shouldRefresh",value:function(){return this._shouldRefresh}},{key:"getAllUrl",value:function(e){return"".concat(this._baseUrl,"?filter=").concat(JSON.stringify({base:e}),"&sort=").concat(JSON.stringify({createdAt:"desc"}),"&limit=1")}},{key:"getCategoryName",value:function(){return this._categoryName}},{key:"getName",value:function(){return this._name}},{key:"getPlural",value:function(){return this._plural}}]),e}(),O={currencies:{model:new v({name:"currencyRate",plural:"currencyRates",categoryName:"currencies"}),data:[]},crypto:{model:new v({name:"cryptoRate",plural:"cryptoRates",categoryName:"crypto"}),data:[]},metals:{model:new v({name:"metalRate",plural:"metalRates",categoryName:"metals"}),data:[]}},m=Object(l.a)({categories:["currencies","crypto","metals"]},O),_=[{label:"Home",name:"home",path:""},{label:"Currencies",name:"currencies",path:"/currencies"},{label:"Crypto",name:"crypto",path:"/crypto"},{label:"Metals",name:"metals",path:"/metals"}],y={items:_,current:function(){var e=window.location.pathname,t="home";return _.forEach((function(n){var r=n.path,a=n.name;e.indexOf(r)>-1&&(t=a)})),t}()},j=n(5),g=n.n(j),E=n(11),S=n(14),w=function(){function e(t){Object(h.a)(this,e),this._options=t||{},this._baseUrl="/user"}return Object(b.a)(e,[{key:"changeBase",value:function(){var e=Object(E.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,localStorage.setItem("investorWalletUserSettings",JSON.stringify({base:t})),e.next=4,S.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{"settings.base":t}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeFavourites",value:function(){var e=Object(E.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,e.next=3,S.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{favourites:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOptions",value:function(e){this._options=Object(l.a)(Object(l.a)({},this._options),e)}}]),e}(),T=Object(l.a)({},JSON.parse(localStorage.getItem("investorWalletUserSettings")||"{}")),x=Object(l.a)({userSettingsAdapter:new w(Object(l.a)(Object(l.a)({},T),JSON.parse(localStorage.getItem("investorWalletUser")||"{}"))),baseOptions:[{value:"USD",label:"USD"},{value:"PLN",label:"PLN"}]},T),U=Object(i.c)({authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;switch(r){case d.LOGIN_USER:return Object(l.a)(Object(l.a)({},e),{},{user:n.user});case d.LOGOUT_USER:return Object(l.a)(Object(l.a)({},e),{},{user:void 0});case d.SET_USER_FAVOURITES:return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{favourites:n})});case d.SET_INIT:return Object(l.a)(Object(l.a)({},e),{},{init:n});case d.SET_USER:return Object(l.a)(Object(l.a)({},e),{},{user:n});default:return Object(l.a)({},e)}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case d.SET_DATA:return Object(l.a)(Object(l.a)({},e),{},Object(p.a)({},r.category,Object(l.a)(Object(l.a)({},e[r.category]),{},{data:r.data})));default:return Object(l.a)({},e)}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.MENU_CHANGE:return Object(l.a)(Object(l.a)({},e),{},{current:t.payload});default:return Object(l.a)({},e)}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case d.SET_SETTINGS:return Object(l.a)(Object(l.a)({},e),r);default:return Object(l.a)({},e)}}}),k=n(8),N=g.a.mark(I),A=g.a.mark(G),R=g.a.mark(C);function I(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(d.GET_USER_DATA,G);case 2:case"end":return e.stop()}}),N)}function G(e){var t,n;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.url,r.prev=1,r.next=4,S.a.get({url:t});case 4:return(n=r.sent).id=n._id,delete n._id,r.next=9,Object(k.c)({type:d.SET_USER,payload:n&&n[0]||null});case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),console.error(r.t0);case 14:case"end":return r.stop()}}),A,null,[[1,11]])}function C(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([I()]);case 2:case"end":return e.stop()}}),R)}var D=n(15),J=g.a.mark(P),L=g.a.mark(W),F=g.a.mark(z);function P(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(D.a,W);case 2:case"end":return e.stop()}}),J)}function W(e){var t,n,r,a,c;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.payload,r=n.url,a=n.category,s.next=3,S.a.get({url:r});case 3:return c=s.sent,s.next=6,Object(k.c)({type:D.b,payload:{category:a,data:null===(t=c[0])||void 0===t?void 0:t.rates}});case 6:case"end":return s.stop()}}),L)}function z(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([Object(k.b)(P)]);case 2:case"end":return e.stop()}}),F)}var H=g.a.mark(M);function M(e){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([C(),z()]);case 2:case"end":return e.stop()}}),H)}var B=Object(u.a)(),V=[B];var Y=n(23),$=a.a.lazy((function(){return Promise.all([n.e(4),n.e(7)]).then(n.bind(null,82))}));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y.a,{store:function(e){var t=Object(i.e)(U,e,Object(i.d)(i.a.apply(void 0,V)));return B.run(M),t}()},a.a.createElement(r.Suspense,{fallback:a.a.createElement(o.a,null)},a.a.createElement($,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){"use strict";n.d(t,"LOGIN_USER",(function(){return c})),n.d(t,"LOGOUT_USER",(function(){return s})),n.d(t,"SET_INIT",(function(){return o})),n.d(t,"SET_USER_FAVOURITES",(function(){return i})),n.d(t,"GET_USER_DATA",(function(){return u})),n.d(t,"SET_USER",(function(){return l})),n.d(t,"MENU_CHANGE",(function(){return d}));n(27);var r=n(15);n.d(t,"GET_CATEGORY_DATA",(function(){return r.a})),n.d(t,"SET_DATA",(function(){return r.b}));var a=n(25);n.d(t,"SET_SETTINGS",(function(){return a.a}));n(28);var c="LOGIN_USER",s="LOGOUT_USER",o="SET_INIT",i="SET_USER_FAVOURITES",u="GET_USER_DATA",l="SET_USER",d="MENU_CHANGE"}},[[37,2,3]]]);
//# sourceMappingURL=main.3ef8dc3f.chunk.js.map