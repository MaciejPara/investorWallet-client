(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[2],{13:function(e,t,n){"use strict";var r=n(5),a=n.n(r),c=n(3),o=n(9),i=n(10),s=n(11),u=n(33),l=n(31),d=n(19),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r,a=e.apiUrl;return Object(i.a)(this,n),(r=t.call(this))._url=a,r._config={headers:{"content-type":"application/json","Access-Control-Allow-Origin":!0,"Access-Control-Allow-Credentials":!0},credentials:"include"},r}return Object(s.a)(n,[{key:"get",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"get"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"post",body:JSON.stringify(r)}));case 3:if(401!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===o||void 0===o?void 0:o.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:if(409!==(null===o||void 0===o?void 0:o.status)){e.next=10;break}return e.abrupt("return",this._showEmailAlreadyExists());case 10:return e.next=12,o.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"PATCH",body:JSON.stringify(r)}));case 3:if(401!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===o||void 0===o?void 0:o.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:return e.next=10,o.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"delete"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"_showUnauthorized",value:function(){d.store.addNotification({title:"Failure",message:"Unauthorized - check your e-mail or password.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showInternalServerError",value:function(){d.store.addNotification({title:"Failure",message:"Internal server error. Contact with admin.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showEmailAlreadyExists",value:function(){d.store.addNotification({title:"Failure",message:"Email already exists.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}}]),e}());t.a=new f({apiUrl:"https://investor-wallet.herokuapp.com"})},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o}));var r="GET_CATEGORY_DATA",a="SET_DATA",c="SET_INIT_FLAG",o="SET_UPDATE_DATE"},26:function(e,t,n){"use strict";var r=n.p+"static/media/loader.18339639.gif",a=(n(2),n(8));t.a=function(){return Object(a.jsx)("div",{className:"overlay",children:Object(a.jsx)("img",{className:"loader",src:r,alt:"loader"})})}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="SET_SETTINGS"},39:function(e,t,n){},6:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return i})),n.d(t,"m",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return r.a})),n.d(t,"g",(function(){return r.b})),n.d(t,"i",(function(){return r.c})),n.d(t,"k",(function(){return r.d})),n.d(t,"j",(function(){return a.a}));var r=n(15),a=n(28),c="LOGIN_USER",o="LOGOUT_USER",i="SET_INIT",s="SET_USER_FAVOURITES",u="GET_USER_DATA",l="SET_USER",d="MENU_CHANGE",f="LOADER"},61:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(18),o=n.n(c),i=(n(39),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(26),l=n(12),d=n(32),f=n(3),h=n(6),p={user:JSON.parse(localStorage.getItem("investorWalletUser")||"{}"),init:!0},b=n(16),v=n(10),O=n(11),m=function(){function e(t){var n=t.name,r=t.plural,a=t.sort,c=t.categoryName;Object(v.a)(this,e),this._name=n,this._plural=r,this._fetchPending=!1,this._data=[],this._sort=a,this._categoryName=c,this._shouldRefresh=!0,this._baseUrl="/".concat(this._plural)}return Object(O.a)(e,[{key:"setRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._shouldRefresh=e}},{key:"shouldRefresh",value:function(){return this._shouldRefresh}},{key:"getAllUrl",value:function(e){return"".concat(this._baseUrl,"?filter=").concat(JSON.stringify({base:e}),"&sort=").concat(JSON.stringify({createdAt:"desc"}),"&limit=1")}},{key:"getCategoryName",value:function(){return this._categoryName}},{key:"getName",value:function(){return this._name}},{key:"getPlural",value:function(){return this._plural}}]),e}(),g={currencies:{model:new m({name:"currencyRate",plural:"currencyRates",categoryName:"currencies"}),data:[]},crypto:{model:new m({name:"cryptoRate",plural:"cryptoRates",categoryName:"crypto"}),data:[]},metals:{model:new m({name:"metalRate",plural:"metalRates",categoryName:"metals"}),data:[]},stocks:{model:new m({name:"stockRate",plural:"stockRates",categoryName:"stocks"}),data:[]},investments:{model:new m({name:"investment",plural:"investments",categoryName:"investments"}),data:[]}},j=Object(f.a)({categories:["currencies","crypto","metals","stocks"],initFlag:!1},g),y=[{label:"Wallet",name:"home",path:""},{label:"Favourites",name:"favourites",path:"/favourites"},{label:"Currencies",name:"currencies",path:"/currencies"},{label:"Metals",name:"metals",path:"/metals"},{label:"Stocks",name:"stocks",path:"/stocks"}],w={items:y,current:function(){var e=window.location.pathname,t="home";return y.forEach((function(n){var r=n.path,a=n.name;e.indexOf(r)>-1&&(t=a)})),t}()},_=n(5),k=n.n(_),x=n(9),S=n(13),E=function(){function e(t){Object(v.a)(this,e),this._options=t||{},this._baseUrl="/user"}return Object(O.a)(e,[{key:"changeBase",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,localStorage.setItem("investorWalletUserSettings",JSON.stringify({base:t})),this._options.base=t,e.next=5,S.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{"settings.base":t}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeFavourites",value:function(){var e=Object(x.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,e.next=3,S.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{favourites:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOptions",value:function(e){this._options=Object(f.a)(Object(f.a)({},this._options),e)}},{key:"getBase",value:function(){return this._options.base}}]),e}(),N=Object(f.a)({},JSON.parse(localStorage.getItem("investorWalletUserSettings")||"{}")),U=Object(f.a)({userSettingsAdapter:new E(Object(f.a)(Object(f.a)({},N),JSON.parse(localStorage.getItem("investorWalletUser")||"{}"))),baseOptions:[{value:"USD",label:"USD"},{value:"PLN",label:"PLN"}]},N),A=Object(l.b)({authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;switch(r){case h.d:return Object(f.a)(Object(f.a)({},e),{},{user:n.user});case h.e:return Object(f.a)(Object(f.a)({},e),{},{user:void 0});case h.m:return Object(f.a)(Object(f.a)({},e),{},{user:Object(f.a)(Object(f.a)({},e.user),{},{favourites:n})});case h.h:return Object(f.a)(Object(f.a)({},e),{},{init:n});case h.l:return Object(f.a)(Object(f.a)({},e),{},{user:n});default:return Object(f.a)({},e)}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case h.g:return Object(f.a)(Object(f.a)({},e),{},Object(b.a)({},r.category,Object(f.a)(Object(f.a)({},e[r.category]),{},{data:r.data})));case h.k:return Object(f.a)(Object(f.a)({},e),{},Object(b.a)({},r.category,Object(f.a)(Object(f.a)({},e[r.category]),{},{updateDate:r.updateDate})));case h.i:return Object(f.a)(Object(f.a)({},e),{},{initFlag:!e.initFlag});default:return Object(f.a)({},e)}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.f:return Object(f.a)(Object(f.a)({},e),{},{current:t.payload});default:return Object(f.a)({},e)}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case h.j:return Object(f.a)(Object(f.a)({},e),r);default:return Object(f.a)({},e)}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case h.c:return!e;default:return e}}}),R=n(7),T=n(17),I=k.a.mark(D),W=k.a.mark(F),C=k.a.mark(J);function D(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)(h.b,F);case 2:case"end":return e.stop()}}),I)}function F(e){var t,n,r,a;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.url,c.prev=1,c.next=4,S.a.get({url:t});case 4:return n=c.sent,r=Object(T.a)(n,1),(a=r[0]).id=a._id,delete a._id,c.next=11,Object(R.c)({type:h.l,payload:a||null});case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),console.error(c.t0);case 16:case"end":return c.stop()}}),W,null,[[1,13]])}function J(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([D()]);case 2:case"end":return e.stop()}}),C)}var P=n(15),G=k.a.mark(B),L=k.a.mark(M),z=k.a.mark(H);function B(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)(P.a,M);case 2:case"end":return e.stop()}}),G)}function M(e){var t,n,r,a,c,o,i,s,u;return k.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.url,r=t.category,l.next=3,S.a.get({url:n});case 3:return a=l.sent,c=Object(T.a)(a,1),o=c[0],s=(i=o||{}).rates,u=i.createdAt,l.next=9,Object(R.c)({type:P.b,payload:{category:r,data:s}});case 9:return l.next=11,Object(R.c)({type:P.d,payload:{category:r,updateDate:u}});case 11:case"end":return l.stop()}}),L)}function H(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([Object(R.b)(B)]);case 2:case"end":return e.stop()}}),z)}var V=k.a.mark(Y);function Y(e){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([J(),H()]);case 2:case"end":return e.stop()}}),V)}var $=Object(d.a)(),q=[$];var K=n(25),Q=n(8),X=a.a.lazy((function(){return Promise.all([n.e(6),n.e(10)]).then(n.bind(null,112))}));o.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(K.a,{store:function(e){var t=Object(l.d)(A,e,Object(l.c)(l.a.apply(void 0,q)));return $.run(Y),t}(),children:Object(Q.jsx)(r.Suspense,{fallback:Object(Q.jsx)(u.a,{}),children:Object(Q.jsx)(X,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/investorWallet-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/investorWallet-client","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()}},[[61,3,4]]]);
//# sourceMappingURL=main.a552fd2f.chunk.js.map