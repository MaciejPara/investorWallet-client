(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[12],{114:function(e,t,a){"use strict";a.r(t);var n=a(110),c=a(5),r=a.n(c),s=a(9),l=a(3),i=a(79),o=a(25),u=a(2),j=a(71),d=a(24),b=a(77),m=a.n(b),f=a(105),h=a.n(f),O=a(15),p=a(13),v=a(8),x=["categories"];t.default=function(){var e=Object(d.c)(),t=Object(u.useState)([]),a=Object(o.a)(t,2),c=a[0],b=a[1],f=Object(u.useState)(!0),g=Object(o.a)(f,2),N=g[0],w=g[1],C=Object(u.useState)(""),S=Object(o.a)(C,2),y=S[0],F=S[1],P=Object(u.useState)(""),k=Object(o.a)(P,2),T=k[0],H=k[1],L=Object(u.useState)([]),I=Object(o.a)(L,2),B=I[0],E=I[1],J=Object(u.useState)([]),A=Object(o.a)(J,2),D=A[0],W=A[1],Y=Object(u.useState)(""),V=Object(o.a)(Y,2),M=V[0],U=V[1],_=Object(u.useState)(""),q=Object(o.a)(_,2),R=q[0],z=q[1],G=Object(u.useState)(0),K=Object(o.a)(G,2),Q=K[0],X=K[1];Object(d.d)((function(t){var a=t.collections,n=t.settings.base;a.initFlag||(e({type:O.c}),a.categories.forEach((function(t){var c,r=null===(c=a[t])||void 0===c?void 0:c.model;e({type:O.a,payload:{url:r.getAllUrl(n),category:r.getCategoryName()}})})))})),Object(d.d)((function(e){var t=e.collections,a=t.categories,n=Object(i.a)(t,x),c=e.settings.base,r=[{label:c,value:c.toLowerCase(),rate:1}],s=[{label:c,value:c.toLowerCase(),rate:1}];null===a||void 0===a||a.forEach((function(e){var t;null===(t=n[e].data)||void 0===t||t.forEach((function(t){var a=Object(l.a)({label:t.name,value:t.name.toLowerCase()},t);r.push(a),"currencies"===e&&s.push(a)}))})),JSON.stringify(B)!==JSON.stringify(r)&&E(r),JSON.stringify(D)!==JSON.stringify(s)&&W(s)})),Object(u.useEffect)((function(){var e=0;c.forEach((function(t){var a=t.currentPrice;return e+=a})),X(e)}),[c]),Object(u.useEffect)((function(){Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get({url:"/investments?filter=".concat(JSON.stringify({userId:Z}))});case 2:(t=e.sent).length!==c.length&&b(t.map((function(e){var t=B.find((function(t){var a=t.value;return e.what.toLowerCase()===a})),a=(null===t||void 0===t?void 0:t.rate)*e.count||0;return Object(l.a)(Object(l.a)({},e),{},{id:e._id,currentPrice:a,currentPricePercentage:te(e.price,a)})})));case 4:case"end":return e.stop()}}),e)})))()}),[c,B]);var Z=Object(d.d)((function(e){return Object.assign({},e).authUser.user._id})),$=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.a)(Object(l.a)({id:Date.now()},t),{},{currentPrice:t.price}),e.prev=1,e.next=4,p.a.post({url:"/investment",body:Object(l.a)({userId:Z},a)});case 4:s=e.sent,console.log(">>> ",s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:w(!1),b([].concat(Object(n.a)(c),[Object(l.a)(Object(l.a)({},a),{},{createdAt:m()((new Date).toString()).format("DD.MM.YYYY - HH:mm:ss")})]));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete({url:"/investment/".concat(t)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:b(Object(n.a)(c.filter((function(e){return e.id!==t}))));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return(t/e*100-100).toFixed(1)},ae=function(e){return e>0?"plus":"minus"};return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{className:"sectionTitle",children:["Amount in the wallet: ",Q||0]}),Object(v.jsxs)("button",{className:"addTransactionButton",onClick:function(){w(!0)},children:[Object(v.jsx)("span",{children:"Add investment"})," ",Object(v.jsx)("i",{className:"fa-solid fa-plus addIcon"})]}),N&&Object(v.jsx)("div",{className:"newTransaction",children:Object(v.jsx)(j.a,{initialValues:{what:"",count:"",from:"",price:""},validate:function(e){var t={};return["what","count","from","price"].forEach((function(a){e[a]||(t[a]="Required")})),t},onSubmit:$,children:function(e){var t=e.values,a=e.errors,n=(e.touched,e.handleChange),c=e.handleBlur,r=e.handleSubmit,s=e.isSubmitting;return Object(v.jsx)("form",{className:"newTransaction-form",onSubmit:r,children:Object(v.jsxs)("div",{className:"fieldsContainer",children:[Object(v.jsxs)("div",{className:"formField ".concat(a.what),children:[Object(v.jsx)("label",{htmlFor:"what",children:"What"}),Object(v.jsx)(h.a,{wrapperStyle:{width:"100%"},getItemValue:function(e){return e.label},items:B.filter((function(e){return e.value.includes(M.toLowerCase())})),placeholder:"What",renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:M,onChange:function(e){var t=e.currentTarget.value;U(t)},onSelect:function(e){n({target:{name:"what",value:e},currentTarget:{name:"what",value:e}}),U(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.count),children:[Object(v.jsx)("label",{htmlFor:"count",children:"Count"}),Object(v.jsx)("input",{type:"number",name:"count",onChange:n,onBlur:c,value:t.count})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.from),children:[Object(v.jsx)("label",{htmlFor:"from",children:"From"}),Object(v.jsx)(h.a,{wrapperStyle:{width:"100%"},getItemValue:function(e){return e.label},items:D.filter((function(e){return e.value.includes(R.toLowerCase())})),renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:R,onChange:function(e){var t=e.currentTarget.value;z(t)},onSelect:function(e){n({target:{name:"from",value:e},currentTarget:{name:"from",value:e}}),z(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.price),children:[Object(v.jsx)("label",{htmlFor:"price",children:"Price"}),Object(v.jsx)("input",{type:"number",name:"price",onChange:n,onBlur:c,value:t.price})]}),Object(v.jsxs)("div",{className:"buttonsContainer",children:[Object(v.jsx)("button",{className:"formButton",type:"submit",disabled:s,children:"Add"}),Object(v.jsx)("button",{className:"formButton formButton-cancel",type:"cancel",onClick:function(){return w(!1)},children:"Cancel"})]})]})})}})}),Object(v.jsxs)("div",{className:"transactionContainer tableContainer",children:[c.length?Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{className:"sectionTitle",children:"Investments:"}),Object(v.jsxs)("div",{className:"tableHeaderContainer row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"tableHeader",children:"When"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"What \ud83d\udd0d",value:y,onChange:function(e){var t=e.currentTarget.value;return F(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader",children:"Count"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"From \ud83d\udd0d",value:T,onChange:function(e){var t=e.currentTarget.value;return H(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Current Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto"})]})]}):"",Object(v.jsx)("div",{className:"d-flex w-100 m-auto flex-column",children:c.filter((function(e){var t=e.what,a=e.from;return t.toLowerCase().includes(y)&&a.toLowerCase().includes(T)})).map((function(e,t){var a=e.id,n=e.what,c=e.count,r=e.from,s=e.price,l=e.createdAt,i=e.currentPrice,o=e.currentPricePercentage;return Object(v.jsxs)("div",{className:"transaction categoryItem row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"cell date",children:l}),Object(v.jsx)("span",{className:"cell",children:n}),Object(v.jsx)("span",{className:"cell",children:c}),Object(v.jsx)("span",{className:"cell",children:r}),Object(v.jsx)("span",{className:"cell",children:s}),Object(v.jsxs)("span",{className:"cell m-auto difference ".concat(ae(o)," currentPrice"),children:[Object(v.jsxs)("span",{children:[i," | "]}),Object(v.jsxs)("span",{className:"percentage",children:[o,"%"]})]}),Object(v.jsxs)("span",{className:"cell actions",children:[Object(v.jsx)("i",{className:"far fa-trash-alt",onClick:function(){return ee(a)}}),Object(v.jsx)("i",{className:"fas fa-info-circle ml-4",onClick:function(){return alert("details ".concat(a))}})]})]},t)}))})]})]})}}}]);
//# sourceMappingURL=12.a856b204.chunk.js.map