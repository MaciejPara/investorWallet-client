(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[1],{14:function(e,t,n){"use strict";var r=n(5),a=n.n(r),c=n(3),o=n(11),i=n(12),s=n(13),u=n(33),l=n(31),d=n(17),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r,a=e.apiUrl;return Object(i.a)(this,n),(r=t.call(this))._url=a,r._config={headers:{"content-type":"application/json","Access-Control-Allow-Origin":!0,"Access-Control-Allow-Credentials":!0},credentials:"include"},r}return Object(s.a)(n,[{key:"get",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"get"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"post",body:JSON.stringify(r)}));case 3:if(401!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===o||void 0===o?void 0:o.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:if(409!==(null===o||void 0===o?void 0:o.status)){e.next=10;break}return e.abrupt("return",this._showEmailAlreadyExists());case 10:return e.next=12,o.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.body,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"PATCH",body:JSON.stringify(r)}));case 3:if(401!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=6;break}return e.abrupt("return",this._showUnauthorized());case 6:if(500!==(null===o||void 0===o?void 0:o.status)){e.next=8;break}return e.abrupt("return",this._showInternalServerError());case 8:return e.next=10,o.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,fetch("".concat(this._url).concat(n),Object(c.a)(Object(c.a)({},this._config),{},{method:"delete"}));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(function(){function e(){Object(i.a)(this,e)}return Object(s.a)(e,[{key:"_showUnauthorized",value:function(){d.store.addNotification({title:"Failure",message:"Unauthorized - check your e-mail or password.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showInternalServerError",value:function(){d.store.addNotification({title:"Failure",message:"Internal server error. Contact with admin.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}},{key:"_showEmailAlreadyExists",value:function(){d.store.addNotification({title:"Failure",message:"Email already exists.",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})}}]),e}());t.a=new f({apiUrl:"https://investor-wallet.herokuapp.com"})},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var r="GET_CATEGORY_DATA",a="SET_DATA",c="SET_INIT_FLAG"},24:function(e,t,n){"use strict";var r=n(29),a=n.n(r),c=n(1),o=n.n(c);t.a=function(){return o.a.createElement("img",{className:"loader",src:a.a,alt:"loader"})}},25:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="SET_SETTINGS"},27:function(e,t,n){"use strict";n(6)},28:function(e,t){},29:function(e,t,n){e.exports=n.p+"static/media/loader.f6f2de36.gif"},37:function(e,t,n){e.exports=n(48)},42:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),o=n.n(c),i=(n(42),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(24),l=n(9),d=n(32),f=n(3),p=n(6),h={user:JSON.parse(localStorage.getItem("investorWalletUser")||"{}"),init:!0},v=n(19),b=n(12),O=n(13),m=function(){function e(t){var n=t.name,r=t.plural,a=t.sort,c=t.categoryName;Object(b.a)(this,e),this._name=n,this._plural=r,this._fetchPending=!1,this._data=[],this._sort=a,this._categoryName=c,this._shouldRefresh=!0,this._baseUrl="/".concat(this._plural)}return Object(O.a)(e,[{key:"setRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._shouldRefresh=e}},{key:"shouldRefresh",value:function(){return this._shouldRefresh}},{key:"getAllUrl",value:function(e){return"".concat(this._baseUrl,"?filter=").concat(JSON.stringify({base:e}),"&sort=").concat(JSON.stringify({createdAt:"desc"}),"&limit=1")}},{key:"getCategoryName",value:function(){return this._categoryName}},{key:"getName",value:function(){return this._name}},{key:"getPlural",value:function(){return this._plural}}]),e}(),g={currencies:{model:new m({name:"currencyRate",plural:"currencyRates",categoryName:"currencies"}),data:[]},crypto:{model:new m({name:"cryptoRate",plural:"cryptoRates",categoryName:"crypto"}),data:[]},metals:{model:new m({name:"metalRate",plural:"metalRates",categoryName:"metals"}),data:[]}},_=Object(f.a)({categories:["currencies","crypto","metals"],initFlag:!1},g),y=[{label:"Home",name:"home",path:""},{label:"Currencies",name:"currencies",path:"/currencies"},{label:"Crypto",name:"crypto",path:"/crypto"},{label:"Metals",name:"metals",path:"/metals"}],j={items:y,current:function(){var e=window.location.pathname,t="home";return y.forEach((function(n){var r=n.path,a=n.name;e.indexOf(r)>-1&&(t=a)})),t}()},w=n(5),E=n.n(w),S=n(11),T=n(14),k=function(){function e(t){Object(b.a)(this,e),this._options=t||{},this._baseUrl="/user"}return Object(O.a)(e,[{key:"changeBase",value:function(){var e=Object(S.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,localStorage.setItem("investorWalletUserSettings",JSON.stringify({base:t})),e.next=4,T.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{"settings.base":t}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeFavourites",value:function(){var e=Object(S.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options.id,e.next=3,T.a.update({url:"".concat(this._baseUrl,"/").concat(n),body:{favourites:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setOptions",value:function(e){this._options=Object(f.a)(Object(f.a)({},this._options),e)}}]),e}(),U=Object(f.a)({},JSON.parse(localStorage.getItem("investorWalletUserSettings")||"{}")),x=Object(f.a)({userSettingsAdapter:new k(Object(f.a)(Object(f.a)({},U),JSON.parse(localStorage.getItem("investorWalletUser")||"{}"))),baseOptions:[{value:"USD",label:"USD"},{value:"PLN",label:"PLN"}]},U),A=Object(l.c)({authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;switch(r){case p.LOGIN_USER:return Object(f.a)(Object(f.a)({},e),{},{user:n.user});case p.LOGOUT_USER:return Object(f.a)(Object(f.a)({},e),{},{user:void 0});case p.SET_USER_FAVOURITES:return Object(f.a)(Object(f.a)({},e),{},{user:Object(f.a)(Object(f.a)({},e.user),{},{favourites:n})});case p.SET_INIT:return Object(f.a)(Object(f.a)({},e),{},{init:n});case p.SET_USER:return Object(f.a)(Object(f.a)({},e),{},{user:n});default:return Object(f.a)({},e)}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case p.SET_DATA:return Object(f.a)(Object(f.a)({},e),{},Object(v.a)({},r.category,Object(f.a)(Object(f.a)({},e[r.category]),{},{data:r.data})));case p.SET_INIT_FLAG:return Object(f.a)(Object(f.a)({},e),{},{initFlag:!e.initFlag});default:return Object(f.a)({},e)}},menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.MENU_CHANGE:return Object(f.a)(Object(f.a)({},e),{},{current:t.payload});default:return Object(f.a)({},e)}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case p.SET_SETTINGS:return Object(f.a)(Object(f.a)({},e),r);default:return Object(f.a)({},e)}},loader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case p.LOADER:return!e;default:return e}}}),N=n(8),R=E.a.mark(C),I=E.a.mark(L),G=E.a.mark(W);function C(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(p.GET_USER_DATA,L);case 2:case"end":return e.stop()}}),R)}function L(e){var t,n;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.url,r.prev=1,r.next=4,T.a.get({url:t});case 4:return(n=r.sent).id=n._id,delete n._id,r.next=9,Object(N.c)({type:p.SET_USER,payload:n&&n[0]||null});case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),console.error(r.t0);case 14:case"end":return r.stop()}}),I,null,[[1,11]])}function W(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)([C()]);case 2:case"end":return e.stop()}}),G)}var D=n(15),F=E.a.mark(z),J=E.a.mark(H),P=E.a.mark(M);function z(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(D.a,H);case 2:case"end":return e.stop()}}),F)}function H(e){var t,n,r,a,c;return E.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.payload,r=n.url,a=n.category,o.next=3,T.a.get({url:r});case 3:return c=o.sent,o.next=6,Object(N.c)({type:D.b,payload:{category:a,data:null===(t=c[0])||void 0===t?void 0:t.rates}});case 6:case"end":return o.stop()}}),J)}function M(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)([Object(N.b)(z)]);case 2:case"end":return e.stop()}}),P)}var B=E.a.mark(V);function V(e){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)([W(),M()]);case 2:case"end":return e.stop()}}),B)}var Y=Object(d.a)(),$=[Y];var q=n(23),K=a.a.lazy((function(){return Promise.all([n.e(4),n.e(8)]).then(n.bind(null,81))}));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(q.a,{store:function(e){var t=Object(l.e)(A,e,Object(l.d)(l.a.apply(void 0,$)));return Y.run(V),t}()},a.a.createElement(r.Suspense,{fallback:a.a.createElement(u.a,null)},a.a.createElement(K,null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/investorWallet-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/investorWallet-client","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},6:function(e,t,n){"use strict";n.d(t,"LOGIN_USER",(function(){return c})),n.d(t,"LOGOUT_USER",(function(){return o})),n.d(t,"SET_INIT",(function(){return i})),n.d(t,"SET_USER_FAVOURITES",(function(){return s})),n.d(t,"GET_USER_DATA",(function(){return u})),n.d(t,"SET_USER",(function(){return l})),n.d(t,"MENU_CHANGE",(function(){return d})),n.d(t,"LOADER",(function(){return f}));n(27);var r=n(15);n.d(t,"GET_CATEGORY_DATA",(function(){return r.a})),n.d(t,"SET_DATA",(function(){return r.b})),n.d(t,"SET_INIT_FLAG",(function(){return r.c}));var a=n(25);n.d(t,"SET_SETTINGS",(function(){return a.a}));n(28);var c="LOGIN_USER",o="LOGOUT_USER",i="SET_INIT",s="SET_USER_FAVOURITES",u="GET_USER_DATA",l="SET_USER",d="MENU_CHANGE",f="LOADER"}},[[37,2,3]]]);
//# sourceMappingURL=main.0f5c1870.chunk.js.map