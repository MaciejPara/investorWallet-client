{"version":3,"sources":["components/favourite/index.js","components/content/index.js","views/app/category/index.js"],"names":["Favourite","handleChange","name","state","className","data-value","onClick","Content","data","url","match","useStore","getState","userFavourites","authUser","user","favourites","userSettingsAdapter","settings","dispatch","useDispatch","useState","setFavourites","handleFavouriteChange","a","value","currentTarget","dataset","newFavourites","indexOf","filter","item","push","changeFavourites","result","ok","type","SET_USER_FAVOURITES","payload","map","key","rate","to","Category","props","model","setData","useEffect","shouldRefresh","setRefresh","GET_CATEGORY_DATA","getAllUrl","base","category","getCategoryName","useSelector","newData","collections","JSON","stringify","length"],"mappings":"8KAceA,EAZG,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,KAA0B,IAApBC,aAAoB,SACzD,OACI,0BAAMC,UAAW,OAAQC,aAAYH,EAAMI,QAASL,GAC/CE,EACG,uBAAGC,UAAU,iCAEb,uBAAGA,UAAU,4B,OCqEdG,EAtEC,SAAC,GAAmC,IAAD,IAAhCC,YAAgC,MAAzB,GAAyB,EAAZC,EAAY,EAArBC,MAASD,IAAY,EAM3CE,cAAWC,WAHaC,EAHmB,EAE3CC,SACIC,KAAQC,WAEAC,EAL+B,EAK3CC,SAAYD,oBAGVE,EAAWC,cAR8B,EAUXC,mBAASR,GAVE,mBAUxCG,EAVwC,KAU5BM,EAV4B,KAYzCC,EAAqB,uCAAG,iCAAAC,EAAA,6DAEXC,EAFW,EAC1BC,cACIC,QAAWF,OAGXG,EAAgBZ,GAAc,KAEbY,EAAcC,QAAQJ,IAAU,EACjDG,EAAgBA,EAAcE,QAAO,SAACC,GAAD,OAAUA,IAASN,KACrDG,EAAcI,KAAKP,GATA,SAWLR,EAAoBgB,iBACrCL,GAZsB,QAe1B,QAJMM,EAXoB,cAe1B,IAAIA,OAAJ,EAAIA,EAAQC,MACRhB,EAAS,CAAEiB,KAAMC,sBAAqBC,QAASV,IAC/CN,EAAcM,IAjBQ,2CAAH,sDAqB3B,OACI,yBAAKxB,UAAW,oBACZ,yBAAKA,UAAW,2BACZ,0BAAMA,UAAW,gBACjB,0BAAMA,UAAW,eAAjB,QACA,0BAAMA,UAAW,sBAAjB,cACA,0BAAMA,UAAW,iBAErB,yBAAKA,UAAW,mCACXI,EAAK+B,KAAI,WAAiBC,GAAjB,IAAGtC,EAAH,EAAGA,KAAMuC,EAAT,EAASA,KAAT,OACN,yBAAKD,IAAKA,EAAKpC,UAAW,2BACtB,kBAAC,EAAD,CACIH,aAAcsB,EACdrB,KAAMA,EACNC,MAAOa,EAAWa,QAAQ3B,IAAS,IAEvC,0BAAME,UAAW,QAASF,GAC1B,0BAAME,UAAW,eAAgBqC,GACjC,0BAAMrC,UAAW,QACb,kBAAC,IAAD,CAAMsC,GAAE,UAAKjC,IACT,uBAAGL,UAAU,+B,QCH9BuC,UAnDE,SAACC,GAAW,IACjBC,EAAUD,EAAVC,MAEF1B,EAAWC,cACTF,EAAaP,cAAWC,WAAxBM,SAJgB,EAKAG,mBAAS,MALT,mBAKjBb,EALiB,KAKXsC,EALW,KA4BxB,OArBAC,qBAAU,YACN,OAAIF,QAAJ,IAAIA,OAAJ,EAAIA,EAAOG,mBACPH,EAAMI,YAAW,GACjB9B,EAAS,CACLiB,KAAMc,oBACNZ,QAAS,CACL7B,IAAKoC,EAAMM,UAAN,OAAgBjC,QAAhB,IAAgBA,OAAhB,EAAgBA,EAAUkC,MAC/BC,SAAUR,EAAMS,wBAI7B,IAEHC,aAAY,YAAsB,IAAD,EACvBC,EAAO,UADgB,EAAlBC,YACgB,OAACZ,QAAD,IAACA,OAAD,EAACA,EAAOS,0BAAtB,aAAG,EAAuC9C,KAEnDkD,KAAKC,UAAUH,KAAaE,KAAKC,UAAUnD,IAC3CsC,EAAQU,MAKZ,6BACKX,EACG,oCACc,OAATrC,EACG,qCACS,OAAJA,QAAI,IAAJA,OAAA,EAAAA,EAAMoD,QAAS,EACZ,kBAAC,EAAD,iBAAahB,EAAb,CAAoBpC,KAAMA,KAE1B,4CAIR,kBAAC,IAAD,OAIR","file":"static/js/8.e9404e8b.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Favourite = ({ handleChange, name, state = false }) => {\n    return (\n        <span className={\"cell\"} data-value={name} onClick={handleChange}>\n            {state ? (\n                <i className=\"fas fa-star favourite active\" />\n            ) : (\n                <i className=\"far fa-star favourite\" />\n            )}\n        </span>\n    );\n};\n\nexport default Favourite;\n","import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport FavouriteComponent from \"../../components/favourite\";\nimport { useStore, useDispatch } from \"react-redux\";\nimport { SET_USER_FAVOURITES } from \"../../redux/actions\";\n\nconst Content = ({ data = [], match: { url } }) => {\n    const {\n        authUser: {\n            user: { favourites: userFavourites },\n        },\n        settings: { userSettingsAdapter },\n    } = useStore().getState();\n\n    const dispatch = useDispatch();\n\n    const [favourites, setFavourites] = useState(userFavourites);\n\n    const handleFavouriteChange = async ({\n        currentTarget: {\n            dataset: { value },\n        },\n    }) => {\n        let newFavourites = favourites || [];\n\n        if (newFavourites && newFavourites.indexOf(value) > -1) {\n            newFavourites = newFavourites.filter((item) => item !== value);\n        } else newFavourites.push(value);\n\n        const result = await userSettingsAdapter.changeFavourites(\n            newFavourites\n        );\n\n        if (result?.ok) {\n            dispatch({ type: SET_USER_FAVOURITES, payload: newFavourites });\n            setFavourites(newFavourites);\n        }\n    };\n\n    return (\n        <div className={\"contentContainer\"}>\n            <div className={\"row w-100 m-auto d-flex\"}>\n                <span className={\"tableHeader\"} />\n                <span className={\"tableHeader\"}>Name</span>\n                <span className={\"tableHeader m-auto\"}>Last Price</span>\n                <span className={\"tableHeader\"} />\n            </div>\n            <div className={\"d-flex w-100 m-auto flex-column\"}>\n                {data.map(({ name, rate }, key) => (\n                    <div key={key} className={\"row w-100 m-auto d-flex\"}>\n                        <FavouriteComponent\n                            handleChange={handleFavouriteChange}\n                            name={name}\n                            state={favourites.indexOf(name) > -1}\n                        />\n                        <span className={\"cell\"}>{name}</span>\n                        <span className={\"cell m-auto\"}>{rate}</span>\n                        <span className={\"cell\"}>\n                            <Link to={`${url}`}>\n                                <i className=\"fas fa-ellipsis-h\" />\n                            </Link>\n                        </span>\n                    </div>\n                ))}\n            </div>\n            {/*{data.map(({ name, rate }, key) => (*/}\n            {/*<p key={key}>*/}\n            {/*{base} {moment.utc(createdAt).format(\"YYYY-MM-DD HH:mm:ss\")}{\" \"}*/}\n            {/*{moment.utc(date).format(\"YYYY-MM-DD HH:mm:ss\")}*/}\n            {/*<Link to={`${url}/${_id}`}>details</Link>*/}\n            {/*</p>*/}\n            {/*))}*/}\n        </div>\n    );\n};\n\nexport default Content;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector, useStore } from \"react-redux\";\nimport Content from \"../../../components/content\";\nimport { GET_CATEGORY_DATA } from \"../../../redux/actions\";\nimport Loader from \"../../../components/loader\";\n\nconst Category = (props) => {\n    const { model } = props;\n\n    const dispatch = useDispatch();\n    const { settings } = useStore().getState();\n    const [data, setData] = useState(null);\n\n    useEffect(() => {\n        if (model?.shouldRefresh()) {\n            model.setRefresh(false);\n            dispatch({\n                type: GET_CATEGORY_DATA,\n                payload: {\n                    url: model.getAllUrl(settings?.base),\n                    category: model.getCategoryName(),\n                },\n            });\n        }\n    }, []);\n\n    useSelector(({ collections }) => {\n        const newData = collections[model?.getCategoryName()]?.data;\n\n        if (JSON.stringify(newData) !== JSON.stringify(data)) {\n            setData(newData);\n        }\n    });\n\n    return (\n        <div>\n            {model ? (\n                <>\n                    {data !== null ? (\n                        <>\n                            {data?.length > 0 ? (\n                                <Content {...props} data={data} />\n                            ) : (\n                                <p>No results..</p>\n                            )}\n                        </>\n                    ) : (\n                        <Loader />\n                    )}\n                </>\n            ) : (\n                <span>working on it..</span>\n            )}\n        </div>\n    );\n};\n\nexport default Category;\n"],"sourceRoot":""}