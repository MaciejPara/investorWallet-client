(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[12],{114:function(e,t,a){"use strict";a.r(t);var n=a(110),c=a(5),r=a.n(c),s=a(9),l=a(3),i=a(79),o=a(17),u=a(2),d=a(71),j=a(25),b=a(77),m=a.n(b),f=a(105),h=a.n(f),O=a(15),p=a(13),v=a(8),x=["categories"];t.default=function(){var e=Object(j.c)(),t=Object(u.useState)([]),a=Object(o.a)(t,2),c=a[0],b=a[1],f=Object(u.useState)(!0),g=Object(o.a)(f,2),w=g[0],N=g[1],C=Object(u.useState)(""),S=Object(o.a)(C,2),y=S[0],F=S[1],P=Object(u.useState)(""),H=Object(o.a)(P,2),k=H[0],L=H[1],T=Object(u.useState)([]),I=Object(o.a)(T,2),A=I[0],Y=I[1],B=Object(u.useState)([]),E=Object(o.a)(B,2),J=E[0],D=E[1],M=Object(u.useState)(""),W=Object(o.a)(M,2),V=W[0],R=W[1],U=Object(u.useState)(""),q=Object(o.a)(U,2),z=q[0],_=q[1],G=Object(u.useState)(0),K=Object(o.a)(G,2),Q=K[0],X=K[1],Z=Object(u.useState)(0),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(u.useState)({borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"200px"}),ne=Object(o.a)(ae,2),ce=ne[0];ne[1];Object(j.d)((function(t){var a=t.collections,n=t.settings.base;a.initFlag||(e({type:O.c}),a.categories.forEach((function(t){var c,r=null===(c=a[t])||void 0===c?void 0:c.model;e({type:O.a,payload:{url:r.getAllUrl(n),category:r.getCategoryName()}})})))})),Object(j.d)((function(e){var t=e.collections,a=t.categories,n=Object(i.a)(t,x),c=e.settings.base,r=[{label:c,value:c.toLowerCase(),rate:1}],s=[{label:c,value:c.toLowerCase(),rate:1}];null===a||void 0===a||a.forEach((function(e){var t;null===(t=n[e].data)||void 0===t||t.forEach((function(t){var a=Object(l.a)({label:t.name,value:t.name.toLowerCase()},t);r.push(a),"currencies"===e&&s.push(a)}))})),JSON.stringify(A)!==JSON.stringify(r)&&Y(r),JSON.stringify(J)!==JSON.stringify(s)&&D(s)})),Object(u.useEffect)((function(){var e=0,t=0;c.forEach((function(a){var n=a.price,c=a.currentPrice;e+=parseFloat(c),t+=parseFloat(n)})),X(e.toFixed(2)),te(t.toFixed(2))}),[c]);var re=Object(j.d)((function(e){return Object.assign({},e).authUser.user.id}));Object(u.useEffect)((function(){re&&Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get({url:"/investments?filter=".concat(JSON.stringify({userId:re}))});case 2:(t=e.sent).length!==c.length&&b(t.map((function(e){var t=se(e);return Object(l.a)(Object(l.a)({},e),{},{id:e._id,currentPrice:t,currentPricePercentage:oe(e.price,t),createdAt:m()(e.createdAt.toString()).format("DD.MM.YYYY - HH:mm:ss")})})));case 4:case"end":return e.stop()}}),e)})))()}),[c,A,re]);var se=function(e){var t=A.find((function(t){var a=t.value;return e.what.toLowerCase()===a})),a=A.find((function(t){var a=t.value;return e.from.toLowerCase()===a}));return((null===t||void 0===t?void 0:t.rate)*e.count/(null===a||void 0===a?void 0:a.rate)||0).toFixed(2)},le=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(l.a)(Object(l.a)({id:Date.now()},t),{},{currentPrice:se(t)}),e.prev=1,e.next=4,p.a.post({url:"/investment",body:Object(l.a)({userId:re},a)});case 4:s=e.sent,console.log(">>> ",s),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:N(!1),b([].concat(Object(n.a)(c),[Object(l.a)(Object(l.a)({},a),{},{currentPricePercentage:oe(a.price,a.currentPrice),createdAt:m()((new Date).toString()).format("DD.MM.YYYY - HH:mm:ss")})]));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete({url:"/investment/".concat(t)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:b(Object(n.a)(c.filter((function(e){return e.id!==t}))));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(e,t){return(t/e*100-100||0).toFixed(1)},ue=function(e){return e>0?"plus":"minus"},de=oe(ee,Q);return Object(v.jsxs)("div",{children:[Object(v.jsxs)("h2",{className:"sectionTitle",children:["Amount in the wallet:"," ",Object(v.jsxs)("span",{className:"difference ".concat(ue(de)),children:[Q||0," | ",de,"%"]})]}),Object(v.jsxs)("button",{className:"addTransactionButton",onClick:function(){N(!0)},children:[Object(v.jsx)("span",{children:"Add investment"})," ",Object(v.jsx)("i",{className:"fa-solid fa-plus addIcon"})]}),w&&Object(v.jsx)("div",{className:"newTransaction",children:Object(v.jsx)(d.a,{initialValues:{what:"",count:"",from:"",price:""},validate:function(e){var t={};return["what","count","from","price"].forEach((function(a){e[a]||(t[a]="Required")})),t},onSubmit:le,children:function(e){var t=e.values,a=e.errors,n=(e.touched,e.handleChange),c=e.handleBlur,r=e.handleSubmit,s=e.isSubmitting;return Object(v.jsx)("form",{className:"newTransaction-form",onSubmit:r,children:Object(v.jsxs)("div",{className:"fieldsContainer",children:[Object(v.jsxs)("div",{className:"formField ".concat(a.what),children:[Object(v.jsx)("label",{htmlFor:"what",children:"What"}),Object(v.jsx)(h.a,{wrapperStyle:{width:"100%"},menuStyle:ce,getItemValue:function(e){return e.label},items:A.filter((function(e){return e.value.includes(V.toLowerCase())})),placeholder:"What",renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:V,onChange:function(e){var t=e.currentTarget.value;R(t)},onSelect:function(e){n({target:{name:"what",value:e},currentTarget:{name:"what",value:e}}),R(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.count),children:[Object(v.jsx)("label",{htmlFor:"count",children:"Count"}),Object(v.jsx)("input",{type:"number",name:"count",onChange:n,onBlur:c,value:t.count})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.from),children:[Object(v.jsx)("label",{htmlFor:"from",children:"From"}),Object(v.jsx)(h.a,{wrapperStyle:{width:"100%"},menuStyle:ce,getItemValue:function(e){return e.label},items:J.filter((function(e){return e.value.includes(z.toLowerCase())})),renderItem:function(e){var t=e.label;return Object(v.jsx)("div",{className:"autocomplete-item",children:t})},value:z,onChange:function(e){var t=e.currentTarget.value;_(t)},onSelect:function(e){n({target:{name:"from",value:e},currentTarget:{name:"from",value:e}}),_(e)}})]}),Object(v.jsxs)("div",{className:"formField ".concat(a.price),children:[Object(v.jsx)("label",{htmlFor:"price",children:"Price"}),Object(v.jsx)("input",{type:"number",name:"price",onChange:n,onBlur:c,value:t.price})]}),Object(v.jsxs)("div",{className:"buttonsContainer",children:[Object(v.jsx)("button",{className:"formButton",type:"submit",disabled:s,children:"Add"}),Object(v.jsx)("button",{className:"formButton formButton-cancel",type:"cancel",onClick:function(){return N(!1)},children:"Cancel"})]})]})})}})}),c.length?Object(v.jsx)("h3",{className:"sectionTitle mt-4",children:"Investments:"}):"",Object(v.jsxs)("div",{className:"transactionContainer tableContainer",children:[c.length?Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"tableHeaderContainer row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"tableHeader",children:"When"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"What \ud83d\udd0d",value:y,onChange:function(e){var t=e.currentTarget.value;return F(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader",children:"Count"}),Object(v.jsx)("span",{className:"tableHeader",children:Object(v.jsx)("input",{type:"text",placeholder:"From \ud83d\udd0d",value:k,onChange:function(e){var t=e.currentTarget.value;return L(t.toLowerCase())}})}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto",children:"Current Price"}),Object(v.jsx)("span",{className:"tableHeader m-auto"})]})}):"",Object(v.jsx)("div",{className:"d-flex w-100 m-auto flex-column",children:c.filter((function(e){var t=e.what,a=e.from;return t.toLowerCase().includes(y)&&a.toLowerCase().includes(k)})).map((function(e,t){var a=e.id,n=e.what,c=e.count,r=e.from,s=e.price,l=e.createdAt,i=e.currentPrice,o=e.currentPricePercentage;return Object(v.jsxs)("div",{className:"transaction categoryItem row w-100 m-auto d-flex",children:[Object(v.jsx)("span",{className:"cell date",children:l}),Object(v.jsx)("span",{className:"cell",children:n}),Object(v.jsx)("span",{className:"cell",children:c}),Object(v.jsx)("span",{className:"cell",children:r}),Object(v.jsx)("span",{className:"cell",children:s}),Object(v.jsxs)("span",{className:"cell m-auto ".concat(ue(o)," currentPrice"),children:[Object(v.jsxs)("span",{children:[i," | "]}),Object(v.jsxs)("span",{className:"percentage",children:[o,"%"]})]}),Object(v.jsxs)("span",{className:"cell actions",children:[Object(v.jsx)("i",{className:"far fa-trash-alt",onClick:function(){return ie(a)}}),Object(v.jsx)("i",{className:"fas fa-info-circle ml-4",onClick:function(){return alert("details ".concat(a))}})]})]},t)}))})]})]})}}}]);
//# sourceMappingURL=12.3eb05dbf.chunk.js.map